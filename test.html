<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
<h1>Hello!</h1>

<button class="register">Register</button>
<button class="login">Login</button>

<p class="players">Unauthorized (Need to log in)</p>

<script>
    const url = "http://localhost:3000/v1";
    const options = {
        credentials: "include",
        mode: "cors",
        headers: {
            "Content-Type": "application/json"
        }
    };
    const body = JSON.stringify({
        email: "brah@brah.com",
        password: "Brah123"
    });

    const register = document.querySelector(".register");
    const login = document.querySelector(".login");

    const getPlayers = async () => {
        const verified = await fetch(`${url}/auth/verify`, {
            method: "GET",
            ...options
        });

        if (verified.status === 401) {
            return;
        }


        const response = await fetch(`${url}/players`, {
            method: "GET",
            ...options
        });

        console.table(await response.json());
    };

    getPlayers();

    register.addEventListener("click", () => fetch(`${url}/auth/register`, {
        method: "POST",
        body,
        ...options
    }));

    login.addEventListener("click", () => fetch(`${url}/auth/login`, {
        method: "POST",
        body,
        ...options
    }));
</script>
</body>
</html>